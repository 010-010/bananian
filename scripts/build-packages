#!/bin/sh

set -e

while read package; do
	packagename=$(echo "$package" | cut -f 1)
	packagefile=$(echo "$package" | cut -f 3)
	case "$packagename" in
		libbananui*)
			d=1
			;;
		*)
			d=0
			;;
	esac
	if [ -f "$packagefile" ] && [ "$packagefile" -nt "$packagename" ]; then
		echo "Package already built, touch $packagename to rebuild."
	else
		make package PACKAGE_PATH="$(pwd)/$packagename" \
			NO_LIBBANANUI_DEPEND=$d
	fi
done < .packages-build
